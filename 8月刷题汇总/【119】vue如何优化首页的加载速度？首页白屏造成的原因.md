# 【119】vue如何优化首页的加载速度？首页白屏造成的原因?

> 和昨天一样，也是一道有关Vue的题目，看来vue在前端面试中真的很火，但是问题不仅仅是vue的问题，也是SPA型页面的通病

## 解析【来源自Github】
这里有两个问题，两个问题有相通之处，先说后者：
### 一、首页白屏的原因

**原因**

SPA型单页面应用的 html 是靠 js 生成，因为首屏需要加载很大的js文件(app.js vendor.js)，所以当网速差的时候会产生一定程度的白屏。

> 新手常见问题，所有的东西都往app.js\vendor.js里面塞，其实有些大的文件可以独立出来的，充分利用浏览器的资源加载进程数

**解决办法**

- `webpack commonchunk`优化 webpack 减少模块打包体积，code-split 按需加载
- `SSR` 服务端渲染，在服务端事先拼装好首页所需的 html
- `产品设计角度` 首页加 loading 或 骨架屏 （仅仅是优化体验）


### 二、优化首页加载速度

> 知道为什么首页加载与其他页面不同后， 对应的就有优化策略
 
1. **分段加载** 既然一次加载太慢，就分两次，第一次只加载首屏需要的资源
2. **提取公共部分** 避免代码的冗余造成脚本文件体积巨大
3. **SSR** 交给服务器进行渲染， 减少浏览器的负担
4. **多页SPA** 改单页应用为多页应用，需要修改webpack的entry  + prefetch
6. **quicklink** 实际上就是检查页面链接然后在浏览器空闲时间进行prefetch
7. **service worker** 接入service worker缓存，和ssr一起搭配使用更佳

### 扩展：页面压缩和性能优化（适用于所有页面，包含SPA）

1. **CDN** 资源分到子服务器处理，跨域策略
2.  **资源占位** 骨架屏这种的用户体验的东西一定要上，最好借助stream先将这部分输出给浏览器解析
3.  **减少请求数量**、**雪碧图**、**gzip**、**浏览器缓存**